# AI Biostats Book ‚Äì Interactive Tutor Project

This project aims to integrate a series of AI-driven interactive tutor widgets into Professor Yaniv Brandvain's online textbook, *Applied Biostatistics*.

The first prototype has been completed: an **evaluative chatbot** for a data visualization problem. It receives a student's answer, provides instant feedback generated by a Large Language Model (LLM), and logs all interactions to both a local database and an online Google Sheet.

Google sheet linkÔºöhttps://docs.google.com/spreadsheets/d/1jCZQq9zPbldhaNbO2VgjZaWul8wsdyp8k94SCbUrfDM/edit?gid=0#gid=0
---


## üìÅ Project Structure

This project consists of two main components (recommended to be in separate folders):

### üîß Backend (Flask App)

**Example folder:** `flask-ai-feedback/`

- `app.py`: Main Flask application
- `feedback.db`: SQLite database
- Python dependencies
- Handles AI logic, database interactions, and Google Sheets communication

### üåê Frontend (Quarto Book Sandbox)

**Example folder:** `biostats-sandbox/`

- Contains Quarto source files (`.qmd`) and config (`_quarto.yml`)
- Embeds the AI tutor as an HTML widget in the textbook

---

## ‚öôÔ∏è Environment Setup

### 1. Prerequisites

Ensure the following are installed:

- Python (‚â• 3.9)
- R (‚â• 4.0)
- Quarto

---

### 2. Backend Setup

In the backend folder (`AI_Stats_Tutor/`):

#### Create and activate a virtual environment:

```bash
# Create the virtual environment
python -m venv venv

# Activate it
# macOS/Linux:
source venv/bin/activate
# Windows:
venv\Scripts\activate

# Install dependencies:
pip install -r requirements.txt
```
---

### 3. Frontend Setup

Quarto requires R packages to render documents.

#### Start an R session:

```bash
R
```

#### Install necessary R packages:

```r
install.packages(c("knitr", "rmarkdown", "tidyverse"))
```

Then exit R:

```r
q()
```

---

## üîê Configuration

### Google Gemini API Key

- Open `app.py`
- Replace the placeholder `GEMINI_API_KEY = '...'` with your actual key  
‚ö†Ô∏è **Never commit real API keys to public repositories**

### Google Sheets API Credentials

- Download your `google_credentials.json` from Google Cloud Console
- Place it in `AI_Stats_Tutor/`
- Share your target Google Sheet with the `client_email` from the credentials file (Editor access)

---

## ‚ñ∂Ô∏è Running the Project

You need two terminal windows to run backend and frontend separately.

### Step 1: Initialize the Database

In the backend folder:

```bash
# Optional: delete old database
rm feedback.db

# Initialize
flask --app app init-db
```

You should see: `Initialized the database.`

### Step 2: Start Backend Server

```bash
python app.py
```

The server runs on: `http://127.0.0.1:5000`

### Step 3: Start Frontend Preview

In the second terminal, go to the Quarto sandbox folder:

```bash
quarto preview
```

A browser window will open with your textbook and embedded AI widget.

---

## ‚úÖ Current Implemented Features

- **Evaluative Chatbot**: One-shot AI feedback for a data viz problem
- **Local Database Logging**: Stores interactions in `feedback.db`
- **Google Sheets Sync**: Logs synced to a connected Google Sheet
- **Modern UI**: Clean and interactive frontend design
